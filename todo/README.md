# TODOアプリ

高機能で使いやすいタスク管理アプリケーションです。バニラJavaScript、HTML5、CSS3を使用して構築されており、ローカルストレージでデータを永続化します。

## ✨ 機能

### 基本機能
- **タスクの作成・編集・削除**: 直感的な操作でタスクを管理
- **完了状態の切り替え**: チェックボックスで簡単に完了マーク
- **詳細説明**: タスクに詳細な説明を追加可能

### 高度な機能
- **優先度設定**: 高・中・低の3段階で優先度を設定
- **期限管理**: タスクに期限を設定し、期限切れや期限間近の通知
- **カテゴリ分類**: 仕事、個人、買い物、健康、学習、その他のカテゴリ
- **検索機能**: タスクのタイトルや説明を検索
- **フィルタリング**: カテゴリ、優先度、状態による絞り込み
- **ソート機能**: 作成日時、期限、優先度、タイトルでソート

### データ管理
- **自動保存**: 定期的にデータを自動保存
- **エクスポート・インポート**: JSONファイルでデータの書き出し・読み込み
- **バックアップ機能**: データの自動バックアップ
- **統計情報**: タスクの完了率や分析データの表示

### UI/UX
- **レスポンシブデザイン**: デスクトップ、タブレット、モバイル対応
- **ダークテーマ**: システムの設定に応じて自動切り替え
- **アクセシビリティ**: WCAG 2.1 AA準拠
- **キーボードショートカット**: 効率的な操作をサポート
- **アニメーション**: 滑らかなUI遷移

## 🚀 セットアップ

### 必要な環境
- モダンWebブラウザ（Chrome, Firefox, Safari, Edge）
- ローカルサーバー（開発時）

### インストール手順

1. **リポジトリのクローン**
   ```bash
   git clone <repository-url>
   cd todo
   ```

2. **ローカルサーバーの起動**

   **Python 3を使用する場合:**
   ```bash
   python -m http.server 8000
   ```

   **Python 2を使用する場合:**
   ```bash
   python -m SimpleHTTPServer 8000
   ```

   **Node.jsのhttp-serverを使用する場合:**
   ```bash
   npx http-server -p 8000
   ```

   **PHP を使用する場合:**
   ```bash
   php -S localhost:8000
   ```

3. **ブラウザでアクセス**
   ```
   http://localhost:8000
   ```

## 📁 プロジェクト構造

```
todo/
├── index.html              # メインHTMLファイル
├── css/
│   ├── style.css          # メインスタイルシート
│   └── responsive.css     # レスポンシブデザイン
├── js/
│   ├── todo.js            # Todoクラス（データモデル）
│   ├── storage.js         # StorageManager（データ永続化）
│   ├── todoManager.js     # TodoManager（CRUD操作）
│   ├── ui.js              # UIManager（DOM操作・イベント処理）
│   └── app.js             # アプリケーション初期化
└── README.md              # このファイル
```

## 💡 使い方

### 基本操作

1. **新しいタスクを追加**
   - フォームにタスクタイトルを入力
   - 必要に応じて説明、カテゴリ、優先度、期限を設定
   - 「タスクを追加」ボタンをクリック

2. **タスクの完了**
   - タスク左側のチェックボックスをクリック

3. **タスクの編集**
   - タスクの編集アイコン（鉛筆マーク）をクリック
   - フォームで内容を変更し「タスクを更新」をクリック

4. **タスクの削除**
   - タスクの削除アイコン（ゴミ箱マーク）をクリック
   - 確認ダイアログで「確認」をクリック

### フィルタリング・検索

1. **検索**: 検索ボックスにキーワードを入力
2. **カテゴリフィルター**: ドロップダウンからカテゴリを選択
3. **優先度フィルター**: 優先度を選択して絞り込み
4. **状態フィルター**: 完了・未完了で絞り込み
5. **ソート**: 作成日時、期限、優先度、タイトルで並び替え

### データの管理

1. **エクスポート**: 「エクスポート」ボタンでJSONファイルをダウンロード
2. **インポート**: 「インポート」ボタンでJSONファイルを選択

## ⌨️ キーボードショートカット

- `Ctrl + N`: 新しいタスク（タイトル欄にフォーカス）
- `Ctrl + /`: 検索フィールドにフォーカス
- `Escape`: モーダルを閉じる・編集モードを終了
- `Tab`: フォーカス移動（キーボードナビゲーション）

## 🔧 開発者向け情報

### デバッグモード

デバッグモードを有効にするには、以下のいずれかの方法を使用してください：

1. **URLパラメータ**: `?debug=true` を追加
2. **ローカルストレージ**: `localStorage.setItem('todo_debug', 'true')`
3. **localhost**: ローカル環境では自動的に有効

デバッグモードでは以下の機能が利用できます：
- コンソールでの詳細ログ
- グローバルオブジェクトアクセス（`window.TodoApp`, `window.TodoManager`等）
- `Ctrl + Shift + D`: デバッグ情報の表示

### アーキテクチャ

このアプリケーションは以下の設計パターンを採用しています：

1. **MVC パターン**:
   - Model: `Todo` クラス
   - View: `UIManager` クラス
   - Controller: `TodoManager` クラス

2. **責任分離**:
   - `Todo`: データモデルとビジネスロジック
   - `StorageManager`: データ永続化
   - `TodoManager`: CRUD操作とイベント管理
   - `UIManager`: DOM操作とユーザーインタラクション
   - `TodoApp`: アプリケーション初期化と設定

3. **イベント駆動**: カスタムイベントシステムで疎結合を実現

### カスタマイズ

#### 新しいカテゴリの追加

1. `js/todo.js` の `_validateCategory` メソッドの `validCategories` 配列に追加
2. `js/todo.js` の `getCategoryDisplayName` メソッドにマッピングを追加
3. `index.html` の select オプションに追加
4. `css/style.css` に対応するカテゴリ色を定義

#### 新しいソート条件の追加

1. `js/todoManager.js` の `applyFilter` メソッドのswitch文に追加
2. `index.html` のソート select オプションに追加

## 🎨 テーマとスタイリング

### カスタムプロパティ（CSS Variables）

アプリケーションは CSS Custom Properties を使用してテーマ化されています：

```css
:root {
  --color-primary: #3366cc;
  --color-success: #28a745;
  --spacing-md: 1rem;
  /* その他の変数... */
}
```

### ダークテーマ

システムの設定に応じて自動的にダークテーマが適用されます：

```css
@media (prefers-color-scheme: dark) {
  :root {
    --color-bg-primary: #1a1d23;
    /* ダークテーマ用の変数... */
  }
}
```

## 🔒 セキュリティ

- **XSS対策**: HTMLエスケープによる出力サニタイズ
- **入力検証**: フロントエンドでの包括的なバリデーション
- **CSP準拠**: Content Security Policy に対応した実装

## 🌐 ブラウザサポート

- Chrome 88+
- Firefox 85+
- Safari 14+
- Edge 88+

### 必要なブラウザ機能

- ES6+ (Classes, Arrow Functions, Template Literals)
- LocalStorage
- CSS Grid and Flexbox
- CSS Custom Properties

## 📱 アクセシビリティ

- WCAG 2.1 AA 準拠
- キーボードナビゲーション対応
- スクリーンリーダー対応（ARIA属性）
- 高コントラスト・縮小モーション対応
- フォーカス管理とフォーカストラップ

## 🔄 今後の改善予定

- [ ] PWA対応（Service Worker, Manifest）
- [ ] オフライン機能
- [ ] タスクの並び替え（ドラッグ&ドロップ）
- [ ] タグ機能
- [ ] 繰り返しタスク
- [ ] チーム共有機能
- [ ] カスタムテーマエディタ

## 🐛 バグ報告・機能要望

問題やバグを発見された場合、または新機能のご要望がございましたら、以下の方法でご連絡ください：

1. GitHub Issues（推奨）
2. プルリクエスト
3. メールでの連絡

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。詳細は [LICENSE](LICENSE) ファイルをご覧ください。

## 🙏 謝辞

このプロジェクトは以下のオープンソースプロジェクトやリソースを参考にしています：

- [MDN Web Docs](https://developer.mozilla.org/) - Web技術の参考資料
- [WCAG 2.1](https://www.w3.org/WAI/WCAG21/quickref/) - アクセシビリティガイドライン
- [CSS Grid Generator](https://cssgrid-generator.netlify.app/) - CSS Grid レイアウトの参考

---

**開発者**: Claude
**バージョン**: 1.0.0
**最終更新**: 2024年